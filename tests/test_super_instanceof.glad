PRINTLN("=== TESTING SUPER AND INSTANCEOF ===")

CLASS Animal
    # Constructor name now matches Class name
    DEF Animal()
        PRINTLN("Animal Constructor")
    ENDDEF

    DEF speak()
        RETURN "..."
    ENDDEF
ENDCLASS

CLASS Dog INHERITS Animal
    # Constructor name now matches Class name
    DEF Dog()
        # Call parent constructor using SUPER()
        SUPER() 
        PRINTLN("Dog Constructor")
    ENDDEF

    DEF speak()
        RETURN "Woof! " + SUPER.speak()
    ENDDEF
ENDCLASS

PRINTLN("\n[1] Testing SUPER in Constructor:")
LET d = NEW Dog()
# Expected:
# Animal Constructor
# Dog Constructor

PRINTLN("\n[2] Testing SUPER in Method:")
PRINTLN(d.speak()) 
# Expected: Woof! ...

PRINTLN("\n[3] TESTING SUPER WITH ARGUMENTS:")

CLASS Animal
    # Parent constructor takes 'name'
    DEF Animal(name)
        THIS.name = name
        PRINTLN("Animal Constructor: Set name to " + name)
    ENDDEF

    DEF speak()
        RETURN "..."
    ENDDEF
ENDCLASS

CLASS Dog INHERITS Animal
    # Child constructor takes 'name' and passes it up
    DEF Dog(name)
        SUPER(name) # <--- Passing value to parent here
        PRINTLN("Dog Constructor: Ready")
    ENDDEF

    DEF speak()
        RETURN THIS.name + " says Woof!"
    ENDDEF
ENDCLASS

LET d = NEW Dog("Buddy")
# Output:
# Animal Constructor: Set name to Buddy
# Dog Constructor: Ready

PRINTLN(d.speak()) 
# Output: Buddy says Woof!

PRINTLN("\n[4] Testing INSTANCEOF:")
PRINTLN("d is Dog? " + STR(d INSTANCEOF Dog))       # Expected: 1
PRINTLN("d is Animal? " + STR(d INSTANCEOF Animal)) # Expected: 1
PRINTLN("d is String? " + STR(d INSTANCEOF String)) # Expected: 0

CLASS Cat
ENDCLASS

LET c = NEW Cat()
PRINTLN("c is Animal? " + STR(c INSTANCEOF Animal)) # Expected: 0

PRINTLN("\n[5] TESTING HYBRID PARENT CALLS")

CLASS Animal
    DEF Animal()
        PRINTLN("Animal Constructor")
    ENDDEF

    DEF speak()
        RETURN "Generic Sound"
    ENDDEF
ENDCLASS

CLASS Human
    DEF Human()
        PRINTLN("Human Constructor")
    ENDDEF

    DEF speak()
        RETURN "Hello"
    ENDDEF
ENDCLASS

CLASS Dog INHERITS Animal, Human
    DEF Dog()
        PRINTLN("--- Initializing Dog ---")
        
        # STYLE 1: Explicit Calls (Great for Multiple Inheritance)
        Animal.Animal()
        Human.Human()
        
        # STYLE 2: SUPER Call (Great for Single Inheritance / MRO)
        # This will call 'Animal' again because it's first in MRO
        PRINTLN("--- Calling SUPER() ---")
        SUPER() 
    ENDDEF

    DEF speak()
        # Mix both styles in methods too
        RETURN "Woof! " + SUPER.speak() + " " + Human.speak()
    ENDDEF
ENDCLASS

LET d = NEW Dog()
# Expected:
# --- Initializing Dog ---
# Animal Constructor
# Human Constructor
# --- Calling SUPER() ---
# Animal Constructor

PRINTLN("\n[Speaking]")
PRINTLN(d.speak())
# Expected: Woof! Generic Sound Hello